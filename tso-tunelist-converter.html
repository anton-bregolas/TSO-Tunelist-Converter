<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Session Tunelist to Tunetable Converter</title>
    <link rel="stylesheet" type="text/css" href="tso-tunelist-converter.css">
    <script defer type="module" src="tso-tunelist-converter.js"></script>
  </head>
  <body>
    <div class="main-container">
      <h1><b>TSO</b> <span class="glowing">Tunelist</span> <span class="glowing">to</span> <span class="glowing">Tunetable</span> <span class="glowing">Converter</span></h1>
      <div class="nav-container">
        <button class="n-save-btn" id="save" title="Download Tunetable">
          <svg class="app-icon n-save-icon"><use href="icons.svg#n-save-icon"></use></svg>
        </button>
        <button class="n-help-btn" title="Show help instructions" tabindex="0">
          <svg class="app-icon n-help-icon"><use href="icons.svg#n-help-icon"></use></svg>
        </button>
        <button class="n-theme-btn" title="Toggle light/dark theme">
          <svg class="app-icon n-theme-icon-sun"><use href="icons.svg#n-theme-icon-sun"></use></svg>
          <svg class="app-icon n-theme-icon-moon"><use href="icons.svg#n-theme-icon-moon"></use></svg>
        </button>
      </div>
      <div id="acc-main-wrapper">
        <div class="acc-help-menu">
          <div class="acc-menu-intro unwrapped">
            <div class="acc-item-content">
              <h2><span class="glowing">Read</span> <span class="glowing">me</span> <span class="glowing">for</span> <span class="glowing">more</span></h2>
              <p>Get a link to a tunelist posted on <a href="https://thesession.org/" target="_blank" title="https://thesession.org/" tabindex="-1"><b>The&nbsp;Session</b></a>,
                paste it into the input form below and then press the big Generate button and wait a wee bit. A&nbsp;neat <a href="#tunetable" tabindex="-1"><b>Tunetable</b></a> will appear below.
            </div>
          </div>
          <div class="acc-wrapper">
            <div class="acc-item-content">
              <div class="help-menu-subhead glowing">
                <span class="plus-icon">+</span>
                Links you can use
                <svg class="app-icon"><use href="icons.svg#t-gen-btn-ico"></use></svg>
              </div>
              <div class="help-menu-text">
                <p>Valid TSO links must end with /tunes or /tunebook as well as /sets or /tunesets.
                  Note that you may need to manually add /tunes or /tunesets at the end of the base URL.</p>
                <ul>
                  <li><span role="button" class="example-tunebook" title="Example Tunebook"><b>Input example Tunebook</b></span>
                  </li><br>
                  <li><span role="button" class="example-tunelist" title="Example tunelist"><b>Input example tunelist</b></span>
                  </li><br>
                  <li><span role="button" class="example-setbook" title="Example Setbook"><b>Input example Setbook</b></span>
                  </li><br>
                  <li><span role="button" class="example-setlist" title="Example setlist"><b>Input example setlist</b></span></li>
                </ul>

                <p><b>NB:</b> You can use sorting queries such as ?orderby=newest as long as the base URL before ‘?’
                    meets the above conditions.</p>
              </div>
            </div>
          </div>
          <div class="acc-wrapper">
            <div class="acc-item-content">
              <div class="help-menu-subhead glowing">
                <div class="plus-icon">+</div>
                How to sort tunes
                <svg class="app-icon"><use href="icons.svg#t-sort-btn-icon"></use></svg>
              </div>
              <div class="help-menu-text">
                <p>When the Tunetable is ready, press the <a href="#sort" tabindex="-1"><b>Sort</b></a> button to open the sorting menu,
                   select the preferred style and options and press the <b>Work away!</b> button to confirm.</p>
                <p>While picking an order-by style is required, other settings are optional. Your tunes / sets can either be left in the 
                   default TSO order or be sorted anew (alphabetically or by tune type). You can also append tune type and key to names and replace URLs with ABC incipits.</p>
                <p>Depending on the options picked, Sort will also (re)move the articles in tune titles to make skimming through the list easier.</p>
              </div>
            </div>
          </div>
          <div class="acc-wrapper">
            <div class="acc-item-content">
              <div class="help-menu-subhead glowing">
                <div class="plus-icon">+</div>
                How to save tunes
                <svg class="app-icon"><use href="icons.svg#n-save-icon"></use></svg>
              </div>
              <div class="help-menu-text">
                <p>Use the <a href="#save" tabindex="-1"><b>Download</b></a> button to save your Tunetable in plain text (.txt) format.
                   If you want to save the data as .json, press the <a href=#t-head-no tabindex="-1"><b>Index (#)</b></a> button on the Tunetable.</p>
                <p>The exported Tunetable will only contain the data you see on the screen, including the tune keys and types which can be added
                   in <a href="#sort" tabindex="-1"><b>Sort</b></a> menu options. If you want to have tune meters in place of IDs or vice versa,
                   click on the header of the <a href=#t-head-no tabindex="-1"><b>ID/M</b></a> column any time before saving. If you need 
                   a few bars of ABCs in place of URLs, select the ‘ABC’ option before sorting your Tunetable.</p>
                <p>Should you wish to revert your tune titles to TSO defaults, press the <a href="#revert" tabindex="-1"><b>Revert</b></a> button 
                   to the right of the Name column.</p>
              </div>
            </div>
          </div>
          <div class="acc-wrapper">
            <div class="acc-item-content">
              <div class="help-menu-subhead glowing">
                <div class="plus-icon">+</div>
                How to add ABCs
                <svg class="app-icon"><use href="icons.svg#n-abc-icon"></use></svg>
              </div>
              <div class="help-menu-text">
                <p>Whether you’re browsing through a long Tunebook or preparing a setlist for a gig, sometimes you need a few bars of notes
                   to remember how a tune starts. With tunelists getting larger, adding ABCs or sheet music for each tune can get painful. Luckily,
                   there’s an easy way to produce a text-only cheat sheet using The Session and this app.</p>
                <p>Tick the ‘ABC’ checkbox at the bottom of the sorting options to change the default display of URLs to ABC incipits. This
                   will immediately preload a compressed shortlist of incipits from a thoroughly filtered list of all the tunes on The Session (<&nbsp;1&nbsp;MB).
                   Any freshly-added tunes missing from the file will be fetched directly from The Session (this may take a few seconds).</p>
                <p>The ABCs will be inserted in your Tunetable after you sort it with preferred settings by pressing the Work away! button.
                   For easier viewing, press the ABC column header to expand it horizontally or click anywhere in the Tunetable to expand all the rows 
                   vertically.</p>
                <p>Note that the ABC shortlist is made up of first settings of tunes on The Session in whatever key and version they happen to have been added in.
                   If you wish to see specific tune settings in your list, as is currently possible in TSO Setbooks and setlists, there will be a separate
                   option for doing so. It will fetch a larger file (2.5&nbsp;MB) and might take a bit longer to complete but the resulting ABCs will be in
                   exact versions and keys as listed in each set.</p>
              </div>
            </div>
          </div>
          <div class="acc-wrapper">
            <div class="acc-item-content">
              <div class="help-menu-subhead glowing">
                <div class="plus-icon">+</div>
                Mobile view tips
                <svg class="app-icon"><use href="icons.svg#n-mobile-icon"></use></svg>
              </div>
              <div class="help-menu-text">
                <p></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <form class="input-container">
        <input type="url" id="input-form" name="input-form" placeholder="Input a link to The Session or press “?”" title="Link example: https://thesession.org/members/26966/tags/Polkas101/tunes" autocomplete="off" autofocus>
        <div class="btn-container">
          <button class="t-btn t-gen-btn" title="Press to create Tunetable from TheSession.org link">
            <div class="t-btn-text">Generate Tunetable</div>
            <div class="t-gen-btn-icon">
              <svg class="app-icon t-input-control-icon"><use href="icons.svg#t-gen-btn-ico"></use></svg>
            </div>
          </button>
          <button class="t-btn t-clr-btn" title="Clear Tunetable and all data">
            <div class="t-clr-btn-icon">
              <svg class="app-icon t-input-control-icon"><use href="icons.svg#t-clr-btn-icon"></use></svg>
            </div>
          </button>
          <button class="t-btn t-sort-btn" id="sort" title="Press to open or close the Sort Menu">
            <div class="t-btn-text">Sort</div>
            <div class="t-sort-btn-icon">
              <svg class="app-icon t-input-control-icon"><use href="icons.svg#t-sort-btn-icon"></use></svg>
            </div>
          </button>
        </div> 
      </form>
      <form class="sort-menu-container">
        <div class="radio-container">
          <div class="radio-wrapper">
            <label for="sort-default-btn" class="radio-label"><b>Sorting style:</b> Default order</label>
            <input type="radio" id="sort-default-btn" class="radio-btn" name="sortstyle" value=1 title="Example: An Seanchai Muimhneach [...] The Ballydesmond [...] Denis Murphy's">
          </div>
          <div class="radio-wrapper">
            <label for="sort-reorder-btn" class="radio-label"><b>Sorting style:</b> Sort by Name</label>
            <input type="radio" id="sort-reorder-btn" class="radio-btn" name="sortstyle" value=2 title="Example: Ballydesmond [...] Denis Murphy's [...] Seanchai Muimhneach">
          </div>
          <div class="radio-wrapper">
            <label for="sort-by-type-btn" class="radio-label"><b>Sorting style:</b> Sort by Type</label>
            <input type="radio" id="sort-by-type-btn" class="radio-btn" name="sortstyle" value=3 title="Example: Seanchai Muimhneach (Jig) [...] Ballydesmond (Polka) [...] Denis Murphy's (Slide)">
          </div>
          <div class="radio-wrapper">
            <span class="radio-intro">The: </span>
            <label for="keep-the-btn" class="radio-label">Keep
            <input type="radio" id="keep-the-btn" class="radio-btn" name="nothestyle" value=0 title="Example: The Magic Slipper" checked></label>
            <label for="move-the-btn" class="radio-label">Move
            <input type="radio" id="move-the-btn" class="radio-btn" name="nothestyle" value=1 title="Example: Magic Slipper, The"></label>
            <label for="cut-the-btn" class="radio-label">Cut
            <input type="radio" id="cut-the-btn" class="radio-btn" name="nothestyle" value=2 title="Example: Magic Slipper"></label>
          </div>
          <div class="radio-wrapper">
            <span class="radio-intro">An:&nbsp;&nbsp;</span>
            <label for="keep-an-btn" class="radio-label">Keep
            <input type="radio" id="keep-an-btn" class="radio-btn" name="noanstyle" value=0 title="Example: An Puncan" checked></label>
            <label for="move-an-btn" class="radio-label">Move
            <input type="radio" id="move-an-btn" class="radio-btn" name="noanstyle" value=1 title="Example: Puncan, An"></label>
            <label for="cut-an-btn" class="radio-label">Cut
            <input type="radio" id="cut-an-btn" class="radio-btn" name="noanstyle" value=2 title="Example: Puncan"></label>
          </div>
          <div class="checkbox-container">
            <span class="radio-intro">Show: </span>
            <label for="add-type" class="checkbox-label">Type
              <input type="checkbox" id="add-type" name="type" class="t-checkbox" value="1">
              <span class="checkbox-btn"></span>
            </label>
            <label for="add-keys" class="checkbox-label">Keys
              <input type="checkbox" id="add-keys" name="keys" class="t-checkbox" value="1">
              <span class="checkbox-btn"></span>
            </label>
            <label for="add-abc" class="checkbox-label">ABC
              <input type="checkbox" id="add-abc" name="abc" class="t-checkbox" value="1">
              <span class="checkbox-btn"></span>
            </label>
          </div>
          <button class="adv-options-btn">Show advanced options</button>
          <div class="adv-options-wrapper hidden">
            <label for="use-abc-settings" class="checkbox-label">Use exact settings for sets ABC
              <input type="checkbox" id="use-abc-settings" name="useabcsettings" class="t-checkbox" value="useAbcSettings">
              <span class="checkbox-btn"></span>
            </label>
            <label for="use-abc-default" class="checkbox-label">Load ABCs instead of URLs by default
              <input type="checkbox" id="use-abc-default" name="useabcdefault" class="t-checkbox" value="useAbcDefault">
              <span class="checkbox-btn"></span>
            </label>
          </div>
        </div>
        <button class="t-btn r-go-sort-btn" title="Apply the selected Sort menu settings">
          <div class="t-btn-text">Work away!
            <div class="r-go-sort-btn-icon">
              <svg class="app-icon r-go-sort-icon"><use href="icons.svg#r-go-sort-icon"></use></svg>
            </div>
          </div>
        </button>
      </form>
      <div class="info-box"></div>
      <div class="t-container">
        <table id="tunetable">
          <thead>
            <tr id="t-headers">
              <th id="t-head-no"><button title="Tunetable Index Number | Click to download Tune data .json">#</button></th>
              <th id="t-head-name">
                <div class="t-head-name-container">
                  <button class="t-head-name-btn" title="Tune Title | Click to expand or shrink Tunetable">Name</button>
                  <button class="t-revert-btn" id="revert" title="Revert Tunetable & data to unsorted original">
                    <svg class="app-icon t-revert-icon"><use href="icons.svg#t-revert-icon"></use></svg>
                  </button>
                </div>
              </th>
              <th id="t-head-id"><button title="TSO Tune ID / Meter | Click to toggle">ID</button></th>
              <th id="t-head-url"><button title="Links to TSO | Click to expand or shrink Tunetable">URL</button></th>
            </tr>
          </thead>
          <tbody id="t-tunes"></tbody>
        </table>
      </div>
    </div>
    <!-- <script src="tso-tunelist-converter.js"></script> -->
  </body>
</html>